(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-person-index-personInformation-personInformation"],{"0fc9":function(t,e,n){"use strict";(function(t){n("a9e3"),n("4d63"),n("ac1f"),n("25f0"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={data:function(){return{stuMessage:{},Code:{to:"746662113@qq.com",from:"1935461147@qq.com",topic:"验证码",content:"contentTest"},newMessage:{ph1:"",ph2:"",ph3:"",ph4:"",oldpassword:"",newpassword:"",inpumail:"",code:"",newmail:""},show:{type1:!1,type2:!0,type3:!1},countdown:"提交",trueCode:"",enableSubmit:{passwordCheck:!1},changeContent:"",newStudent:{id:"s001",name:"申鹤",number:"3190608020",password:"123",account:"zh",sex:"男",phone:"2579247368"}}},onLoad:function(){var e=this;uni.getStorage({key:"studentMessage",success:function(n){e.stuMessage=n.data,t.log(e.stuMessage)}}),this.newStudent.id=this.stuMessage.id,this.newStudent.name=this.stuMessage.name,this.newStudent.number=this.stuMessage.number,this.newStudent.account=this.stuMessage.account,this.newStudent.password=this.stuMessage.password,this.newStudent.phone=this.stuMessage.mail},methods:{submit:function(){var e=this;"更改账号"==this.changeContent&&(this.newStudent.account=this.newMessage.account,t.log(this.newStudent),uni.request({url:"http://139.196.45.104:9001/updateStudent",data:{student:this.newStudent},method:"POST",success:function(n){t.log(n.data),e.stuMessage.account=e.newStudent.account,uni.showToast({title:"修改成功",duration:2e3,icon:"error"}),e.$refs.popup.close()},fail:function(e){t.log(e)}})),"更改密码"!=this.changeContent&&"更改绑定邮箱"!=this.changeContent||("更改密码"==this.changeContent&&(this.newStudent.password=this.newMessage.newpassword,uni.request({url:"http://139.196.45.104:9001/updateStudent",data:{student:this.newStudent},method:"POST",success:function(n){t.log(n.data),e.stuMessage.password=e.newStudent.password,uni.showToast({title:"修改成功",duration:2e3,icon:"error"}),e.$refs.popup.close()},fail:function(e){t.log(e)}})),"更改绑定邮箱"==this.changeContent&&(this.newStudent.phone=this.newMessage.newmail,uni.request({url:"http://139.196.45.104:9001/updateStudent",data:{student:this.newStudent},method:"POST",success:function(n){t.log(n.data),e.stuMessage.mail=e.newStudent.phone,uni.showToast({title:"修改成功",duration:2e3,icon:"error"}),e.$refs.popup.close()},fail:function(e){t.log(e)}})))},change:function(e){this.$refs.popup.open("center"),t.log(e),1==e?(this.changeContent="更改账号",this.show.type1=!0,this.show.type2=!1,this.show.type3=!1,this.newMessage.ph1="输入新账号"):2==e?(this.changeContent="更改密码",this.show.type1=!1,this.show.type2=!0,this.show.type3=!1,this.newMessage.ph1="输入旧密码",this.newMessage.ph2="输入新密码",this.newMessage.ph3="输入绑定邮箱",this.newMessage.ph4="输入邮箱验证码"):3==e&&(this.changeContent="更改绑定邮箱",this.show.type1=!1,this.show.type2=!1,this.show.type3=!0,this.newMessage.ph1="输入旧邮箱",this.newMessage.ph2="输入新邮箱")},returnBack:function(){uni.navigateBack({})},close:function(){this.$refs.popup.close(),"更改密码"!=this.changeContent&&"更改绑定邮箱"!=this.changeContent||(clearTimeout(times),this.countdown="获取")},getCode:function(){var e=this;if(typeof this.countdown==Number)if(this.countdown=1*this.countdown,this.countdown>0)uni.showToast({title:this.countdown+"秒后再试",duration:2e3,icon:"error"});else{uni.showToast({title:"验证码已发送",duration:2e3,icon:"success"}),this.countdown=30;var n=setInterval((function(){e.countdown--,e.countdown<=0&&(clearInterval(n),e.countdown="获取")}),1e3)}else{this.trueCode=Math.round(8999*Math.random()+1e3),this.Code.content=this.trueCode,uni.request({url:"https://route.showapi.com/2377-1?showapi_appid=1072728&showapi_sign=12bcb88ceda8423494b3d5317f321de0&to="+this.Code.to+"&from_to="+this.Code.from+"&topic="+this.Code.topic+"&content="+this.Code.content,method:"POST",success:function(n){t.log(n.data),e.text="request success"}}),this.countdown=30;n=setInterval((function(){e.countdown--,e.countdown<=0&&(clearInterval(n),e.countdown="获取")}),1e3);uni.showToast({title:"验证码已发送",duration:2e3,icon:"success"})}},checkEmail:function(){var t=this,e=this.newMessage.inpumail;if(e){var n=RegExp(/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/).test(e);if(n)return!0;uni.showModal({title:"请输入正确的邮箱",showCancel:!1,success:function(e){e.confirm&&(t.newMessage.inpumail="")}})}}}};e.default=s}).call(this,n("5a52")["default"])},"3b21":function(t,e,n){"use strict";n.r(e);var s=n("0fc9"),i=n.n(s);for(var a in s)"default"!==a&&function(t){n.d(e,t,(function(){return s[t]}))}(a);e["default"]=i.a},"4fc2":function(t,e,n){var s=n("facf");"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var i=n("4f06").default;i("a0698a86",s,!0,{sourceMap:!1,shadowMode:!1})},"5b1e":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return s}));var s={uniPopup:n("7ba6").default},i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("v-uni-view",{staticClass:"returnArea",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.returnBack.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"returnBTside"}),n("v-uni-view",{staticClass:"returnBt cuIcon-back_android"}),n("v-uni-view",{staticClass:"returnBTside"})],1),n("v-uni-view",{staticClass:"cu-list menu sm-border card-menu margin-top"},[n("v-uni-view",{staticClass:"cu-item"},[n("v-uni-view",{staticClass:"content"},[n("v-uni-text",{staticClass:"cuIcon-profile text-grey font14"}),n("v-uni-text",{staticClass:"text-grey font14"},[t._v("ID : "+t._s(t.stuMessage.id))])],1)],1),n("v-uni-view",{staticClass:"cu-item"},[n("v-uni-view",{staticClass:"content"},[n("v-uni-text",{staticClass:"cuIcon-my text-grey font14"}),n("v-uni-text",{staticClass:"text-grey font14"},[t._v("姓名 : "+t._s(t.stuMessage.name))])],1)],1),n("v-uni-view",{staticClass:"cu-item"},[n("v-uni-view",{staticClass:"content"},[n("v-uni-text",{staticClass:"cuIcon-card text-grey font14"}),n("v-uni-text",{staticClass:"text-grey font14"},[t._v("账号 : "+t._s(t.stuMessage.account))])],1),n("v-uni-view",{staticClass:"action"},[n("v-uni-button",{staticClass:"cu-btn round bg-green shadow",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.change(1)}}},[n("v-uni-text",{staticClass:"cuIcon-edit"}),t._v("更改")],1)],1)],1),n("v-uni-view",{staticClass:"cu-item "},[n("v-uni-view",{staticClass:"content"},[n("v-uni-text",{staticClass:"cuIcon-lock text-grey font14"}),n("v-uni-text",{staticClass:"text-grey font14"},[t._v("密码 : *********")])],1),n("v-uni-view",{staticClass:"action"},[n("v-uni-button",{staticClass:"cu-btn round bg-green shadow",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.change(2)}}},[n("v-uni-text",{staticClass:"cuIcon-unlock"}),t._v("更改")],1)],1)],1),n("v-uni-view",{staticClass:"cu-item"},[n("v-uni-view",{staticClass:"content"},[n("v-uni-text",{staticClass:"cuIcon-my text-grey font14"}),n("v-uni-text",{staticClass:"text-grey font14"},[t._v("学号 : "+t._s(t.stuMessage.number))])],1)],1),n("v-uni-view",{staticClass:"cu-item"},[n("v-uni-view",{staticClass:"content"},[n("v-uni-text",{staticClass:"cuIcon-phone text-grey font14"}),n("v-uni-text",{staticClass:"text-grey font14"},[t._v("邮箱 : "+t._s(t.stuMessage.mail))])],1),n("v-uni-view",{staticClass:"action"},[n("v-uni-button",{staticClass:"cu-btn round bg-green shadow",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.change(3)}}},[n("v-uni-text",{staticClass:"cuIcon-edit"}),t._v("更改")],1)],1)],1)],1),n("uni-popup",{ref:"popup",attrs:{"mask-click":!1}},[n("v-uni-view",{staticStyle:{width:"100%","background-color":"#ffffff"}},[n("v-uni-view",{staticClass:"returnArea",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.close.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"returnBTside"}),n("v-uni-view",{staticClass:"returnBt cuIcon-close"}),n("v-uni-view",{staticClass:"returnBTside"}),n("v-uni-view",{staticClass:"changeContent"},[t._v(t._s(t.changeContent))])],1)],1),t.show.type1?n("v-uni-view",[n("v-uni-view",{staticClass:"cu-form-group"},[n("v-uni-view",{staticClass:"title"},[t._v("新账号：")]),n("v-uni-input",{attrs:{placeholder:t.newMessage.ph1},model:{value:t.newMessage.account,callback:function(e){t.$set(t.newMessage,"account",e)},expression:"newMessage.account"}})],1)],1):t._e(),t.show.type2?n("v-uni-view",[n("v-uni-view",{staticClass:"cu-form-group"},[n("v-uni-view",{staticClass:"title"},[t._v("原密码：")]),n("v-uni-input",{attrs:{placeholder:t.newMessage.ph1},model:{value:t.newMessage.oldpassword,callback:function(e){t.$set(t.newMessage,"oldpassword",e)},expression:"newMessage.oldpassword"}})],1),n("v-uni-view",{staticClass:"cu-form-group"},[n("v-uni-view",{staticClass:"title"},[t._v("新密码：")]),n("v-uni-input",{attrs:{placeholder:t.newMessage.ph2},model:{value:t.newMessage.newpassword,callback:function(e){t.$set(t.newMessage,"newpassword",e)},expression:"newMessage.newpassword"}})],1),n("v-uni-view",{staticClass:"cu-form-group"},[n("v-uni-view",{staticClass:"title"},[t._v("邮箱：")]),n("v-uni-input",{attrs:{placeholder:t.newMessage.ph3,type:"mail"},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.checkEmail.apply(void 0,arguments)}},model:{value:t.newMessage.inpumail,callback:function(e){t.$set(t.newMessage,"inpumail",e)},expression:"newMessage.inpumail"}}),n("v-uni-button",{staticClass:"cu-btn round bg-green",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getCode.apply(void 0,arguments)}}},[t._v(t._s(t.countdown))])],1),n("v-uni-view",{staticClass:"cu-form-group"},[n("v-uni-view",{staticClass:"title"},[t._v("验证码：")]),n("v-uni-input",{attrs:{placeholder:t.newMessage.ph4},model:{value:t.newMessage.code,callback:function(e){t.$set(t.newMessage,"code",e)},expression:"newMessage.code"}})],1)],1):t._e(),t.show.type3?n("v-uni-view",[n("v-uni-view",{staticClass:"cu-form-group"},[n("v-uni-view",{staticClass:"title"},[t._v("新邮箱：")]),n("v-uni-input",{attrs:{placeholder:t.newMessage.ph1},model:{value:t.newMessage.newmail,callback:function(e){t.$set(t.newMessage,"newmail",e)},expression:"newMessage.newmail"}})],1),n("v-uni-view",{staticClass:"cu-form-group"},[n("v-uni-view",{staticClass:"title"},[t._v("验证码：")]),n("v-uni-input",{attrs:{placeholder:t.newMessage.ph2},model:{value:t.newMessage.code,callback:function(e){t.$set(t.newMessage,"code",e)},expression:"newMessage.code"}}),n("v-uni-button",{staticClass:"cu-btn round bg-green",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getCode.apply(void 0,arguments)}}},[t._v(t._s(t.countdown))])],1)],1):t._e(),n("v-uni-view",{staticStyle:{width:"100%",height:"0.8px","background-color":"#cccccc"}}),n("v-uni-view",{staticClass:"cancle"},[n("v-uni-view",{staticStyle:{width:"10%"}}),n("v-uni-button",{staticClass:"cu-btn round bg-red",staticStyle:{"margin-bottom":"4px","margin-top":"4px"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.close.apply(void 0,arguments)}}},[t._v("取消")]),n("v-uni-view",{staticStyle:{width:"40%"}}),n("v-uni-button",{staticClass:"cu-btn round bg-green",staticStyle:{"margin-bottom":"4px","margin-top":"4px"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}},[t._v("提交")]),n("v-uni-view",{staticStyle:{width:"10%"}})],1)],1)],1)},a=[]},c699:function(t,e,n){"use strict";var s=n("4fc2"),i=n.n(s);i.a},f16b:function(t,e,n){"use strict";n.r(e);var s=n("5b1e"),i=n("3b21");for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);n("c699");var o,c=n("f0c5"),u=Object(c["a"])(i["default"],s["b"],s["c"],!1,null,"42847ed4",null,!1,s["a"],o);e["default"]=u.exports},facf:function(t,e,n){var s=n("24fb");e=s(!1),e.push([t.i,".returnArea[data-v-42847ed4]{width:100%;height:28px;display:flex;flex-direction:row;justify-content:left}.changeContent[data-v-42847ed4]{\n\t/* 弹出层标题 */width:130px;justify-content:right;display:flex;align-items:center}.returnBt[data-v-42847ed4]{text-align:center;background-color:#fff;\n\t/* border-radius: 8px; */width:26px;margin-right:-13px;margin-left:-13px;font-size:14px;display:flex;justify-content:center;align-items:center;z-index:99}.returnBTside[data-v-42847ed4]{width:26px;background-color:#fff;border-radius:100%}.font14[data-v-42847ed4]{font-size:14px}.cancle[data-v-42847ed4]{background-color:#fff;display:flex;flex-direction:row;vertical-align:middle}",""]),t.exports=e}}]);