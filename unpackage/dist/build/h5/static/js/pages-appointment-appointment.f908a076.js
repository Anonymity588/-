(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-appointment-appointment"],{1569:function(e,t,i){var a=i("24fb");t=a(!1),t.push([e.i,".leave[data-v-7211b29a]{\n\t/* 每个折叠面板的盒子 */}.leaveBTout[data-v-7211b29a]{display:flex;justify-content:center;align-items:center;background-color:#eaf1fa;box-shadow:0 4px 14px 0 rgba(0,0,0,.1);margin-bottom:2px}.leaveBT[data-v-7211b29a]{\n\t/* 留言按钮 */text-align:center;display:flex;justify-content:center;align-items:center;width:60%;height:%?96?%;font-size:14px}.leaveinput[data-v-7211b29a]{\n\t/* 留言输入框 */text-align:center;width:98%;margin-left:1%;border:1px solid}.timewhole[data-v-7211b29a]{font-size:14px;margin-bottom:2px;display:flex;flex-direction:row}.time[data-v-7211b29a]{width:70%;display:flex;justify-content:center;align-items:center}.timeBTclass[data-v-7211b29a]{width:30%}.timeBT[data-v-7211b29a]{height:28px;width:100%}",""]),e.exports=t},"180a":function(e,t,i){"use strict";var a=i("7e32"),s=i.n(a);s.a},"6dfd":function(e,t,i){"use strict";i.r(t);var a=i("d732"),s=i.n(a);for(var n in a)"default"!==n&&function(e){i.d(t,e,(function(){return a[e]}))}(n);t["default"]=s.a},"7e32":function(e,t,i){var a=i("1569");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var s=i("4f06").default;s("80f99eb0",a,!0,{sourceMap:!1,shadowMode:!1})},a8bd:function(e,t,i){"use strict";i.r(t);var a=i("b655"),s=i("6dfd");for(var n in s)"default"!==n&&function(e){i.d(t,e,(function(){return s[e]}))}(n);i("180a");var r,o=i("f0c5"),c=Object(o["a"])(s["default"],a["b"],a["c"],!1,null,"7211b29a",null,!1,a["a"],r);t["default"]=c.exports},b655:function(e,t,i){"use strict";i.d(t,"b",(function(){return s})),i.d(t,"c",(function(){return n})),i.d(t,"a",(function(){return a}));var a={uniCollapse:i("a435").default,uniCollapseItem:i("059b").default},s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",e._l(e.teacher,(function(t,a){return i("v-uni-view",{staticClass:"leave"},[i("uni-collapse",[i("uni-collapse-item",{attrs:{title:"教师："+t.teacherName}},[i("v-uni-view",{staticClass:"leaveBTout"},[i("v-uni-view",{staticClass:"leaveBT",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.showLeave.apply(void 0,arguments)}}},[e._v("点击留言")])],1),i("v-uni-view",{staticClass:"timewhole"},[i("v-uni-view",{staticClass:"time"},[e._v("8:00~9:40")]),i("v-uni-view",{staticClass:"timeBTclass"},[i("v-uni-button",{key:t.index,class:e.btClass[a].item1,on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.reserve1(a)}}},[e._v(e._s(e.reserveType[a].item1))])],1)],1),i("v-uni-view",{staticClass:"timewhole"},[i("v-uni-view",{staticClass:"time"},[e._v("10:00~11:40")]),i("v-uni-view",{staticClass:"timeBTclass"},[i("v-uni-button",{key:t.index,class:e.btClass[a].item2,on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.reserve2(a)}}},[e._v(e._s(e.reserveType[a].item2))])],1)],1),i("v-uni-view",{staticClass:"timewhole"},[i("v-uni-view",{staticClass:"time"},[e._v("14:00~15:40")]),i("v-uni-view",{staticClass:"timeBTclass"},[i("v-uni-button",{key:t.index,class:e.btClass[a].item3,on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.reserve3(a)}}},[e._v(e._s(e.reserveType[a].item3))])],1)],1),i("v-uni-view",{staticClass:"timewhole"},[i("v-uni-view",{staticClass:"time"},[e._v("16:00~17:40")]),i("v-uni-view",{staticClass:"timeBTclass"},[i("v-uni-button",{key:t.index,class:e.btClass[a].item4,on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.reserve4(a)}}},[e._v(e._s(e.reserveType[a].item4))])],1)],1)],1)],1)],1)})),1)},n=[]},d732:function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={data:function(){return{btClass:[],leaveMessage:"",reserveType:[],tel:"910",teacher:[],leave:{sid:"s001",tid:"t001",time:"",content:""}}},onLoad:function(){var t=this;uni.request({url:"http://139.196.45.104:9001/getAllTime",data:{sid:"s001"},header:{"custom-header":"hello"},success:function(i){e.log(i.data.data),t.teacher=i.data.data;for(var a=0;a<t.teacher.length;a++){var s={item1:"cu-btn bg-grey shadow timeBT cuIcon-info",item2:"cu-btn bg-grey shadow timeBT cuIcon-info",item3:"cu-btn bg-grey shadow timeBT cuIcon-info",item4:"cu-btn bg-grey shadow timeBT cuIcon-info"},n={item1:"可预约",item2:"可预约",item3:"可预约",item4:"可预约"};t.btClass.push(s),t.reserveType.push(n)}for(var r=0;r<t.teacher.length;r++)"false"==t.teacher[r].time1&&(t.btClass[r].item1="cu-btn bg-red shadow timeBT cuIcon-roundclose",t.reserveType[r].item1="不可预约"),"false"==t.teacher[r].time2&&(t.btClass[r].item2="cu-btn bg-red shadow timeBT cuIcon-roundclose",t.reserveType[r].item2="不可预约"),"false"==t.teacher[r].time3&&(t.btClass[r].item3="cu-btn bg-red shadow timeBT cuIcon-roundclose",t.reserveType[r].item3="不可预约"),"false"==t.teacher[r].time4&&(t.btClass[r].item4="cu-btn bg-red shadow timeBT cuIcon-roundclose",t.reserveType[r].item4="不可预约")},fail:function(t){e.log(t)}})},methods:{reserve1:function(t){var i=this;e.log(t),"可预约"==this.reserveType[t].item1?uni.request({url:"http://139.196.45.104:9001/updateAppoint",data:{sid:"s001",tid:this.teacher[t].id,time:"时间段1"},success:function(a){e.log(a.data),e.log("asdfdsaf",i.teacher[t].id),i.btClass[t].item1="cu-btn bg-green shadow timeBT cuIcon-roundcheck",i.reserveType[t].item1="已预约";var s=i.teacher[t].teacherMail;i.reserveSuccess(s)},fail:function(t){e.log(t)}}):"已预约"==this.reserveType[t].item1?uni.showToast({title:"时间段已预约",duration:1600,icon:"error"}):uni.showToast({title:"时间段不可预约",duration:1600,icon:"error"})},reserve2:function(t){var i=this;"可预约"==this.reserveType[t].item2?uni.request({url:"http://139.196.45.104:9001/updateAppoint",data:{sid:"s001",tid:this.teacher[t].id,time:"时间段2"},success:function(a){e.log(a.data),i.btClass[t].item2="cu-btn bg-green shadow timeBT cuIcon-roundcheck",i.reserveType[t].item2="已预约";var s=i.teacher[t].teacherMail;i.reserveSuccess(s)},fail:function(t){e.log(t)}}):"已预约"==this.reserveType[t].item2?uni.showToast({title:"时间段已预约",duration:1600,icon:"error"}):uni.showToast({title:"时间段不可预约",duration:1600,icon:"error"})},reserve3:function(t){var i=this;"可预约"==this.reserveType[t].item3?uni.request({url:"http://139.196.45.104:9001/updateAppoint",data:{sid:"s001",tid:this.teacher[t].id,time:"时间段3"},success:function(a){e.log(a.data),i.btClass[t].item3="cu-btn bg-green shadow timeBT cuIcon-roundcheck",i.reserveType[t].item3="已预约";var s=i.teacher[t].teacherMail;i.reserveSuccess(s)},fail:function(t){e.log(t)}}):"已预约"==this.reserveType[t].item3?uni.showToast({title:"时间段已预约",duration:1600,icon:"error"}):uni.showToast({title:"时间段不可预约",duration:1600,icon:"error"})},reserve4:function(t){var i=this;"可预约"==this.reserveType[t].item4?uni.request({url:"http://139.196.45.104:9001/updateAppoint",data:{sid:"s001",tid:this.teacher[t].id,time:"时间段4"},success:function(a){e.log(a.data),i.btClass[t].item4="cu-btn bg-green shadow timeBT cuIcon-roundcheck",i.reserveType[t].item4="已预约";var s=i.teacher[t].teacherMail;i.reserveSuccess(s)},fail:function(t){e.log(t)}}):"已预约"==this.reserveType[t].item4?uni.showToast({title:"时间段已预约",duration:1600,icon:"error"}):uni.showToast({title:"时间段不可预约",duration:1600,icon:"error"})},showLeave:function(){var t=this;this.leave.time=(new Date).valueOf(),uni.showModal({title:"留言",editable:!0,placeholderText:"给该辅导老师留言",confirmText:"提交",success:function(i){e.log(i),i.confirm?(e.log("用户点击确定"),t.leave.time=(new Date).valueOf(),t.leave.content=i.content,""==i.content?uni.showToast({title:"留言不能为空！",duration:1600,icon:"erro"}):uni.request({url:"http://139.196.45.104:9001/addLeave",method:"POST",data:{leave:t.leave},success:function(t){e.log(t.data),uni.showToast({title:"留言成功",duration:1600,icon:"success"})},fail:function(t){e.log(t)}})):i.cancel&&e.log("用户点击取消")}})},judgestatement:function(e){return 1==e},reserveSuccess:function(t){uni.showModal({title:"预约成功！",content:"联系方式："+t,cancelText:"点击复制",confirmText:"确定",success:function(i){e.log(i),i.confirm||i.cancel&&(e.log("用户点击取消"),uni.setClipboardData({data:t,success:function(){e.log("success"),uni.showToast({title:"已复制到剪切板",duration:2e3})}}))}})}}};t.default=i}).call(this,i("5a52")["default"])}}]);